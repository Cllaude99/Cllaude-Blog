---
emoji: ğŸ“
title: 'í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ì— í•˜ë‚˜ì˜ ì±…ì„ì„'
date: '2025-03-16'
categories: featured-Dev
---

í‰ì†Œ ê°œë°œì„ í•˜ë©´ì„œ `ì¢‹ì€ ì½”ë“œë€ ë¬´ì—‡ì¼ê¹Œ?` ì— ëŒ€í•´ ë§ì€ ê³ ë¯¼ì„ í•˜ëŠ” ê²ƒ ê°™ë‹¤.
ì‚¬ëŒë§ˆë‹¤ `ì¢‹ì€ ì½”ë“œ`ì— ëŒ€í•œ ê¸°ì¤€ì€ ë‹¤ë¥¼ ìˆ˜ ìˆê² ì§€ë§Œ ë‚´ê°€ ìƒê°í•˜ëŠ” ì¢‹ì€ ì½”ë“œë€ ë³€í™”ì— ëŒ€ì‘ì„ ì˜ í•˜ëŠ” ì½”ë“œë¼ê³  ìƒê°í•œë‹¤.
ì¦‰ ì–´ë– í•œ ê¸°ëŠ¥ì— ëŒ€í•´ ìˆ˜ì • ìš”ì²­ì´ ìˆì„ ë•Œ "ì–´, ì´ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ë©´ ëª¨ë“  ì½”ë“œë¥¼ ê°ˆì•„ ì—ì–´ì•¼ í•  ê²ƒ ê°™ì•„ìš”." ë¼ê³  ë‹µë³€ì„ í•˜ê²Œ ëœë‹¤ë©´ í•´ë‹¹ ì½”ë“œëŠ” ì¢‹ì§€ ëª»í•œ ì½”ë“œë¼ê³  ìƒê°í•œë‹¤.

ê·¸ë ‡ë‹¤ë©´ ì™œ ë³€í™”ì— ì˜ ëŒ€ì‘í•˜ëŠ” ì½”ë“œê°€ ì¢‹ì€ ì½”ë“œì¼ê¹Œ?

> ê·¸ ì´ìœ ëŠ” ì‚¬ìš©ìì˜ ìš”êµ¬ì‚¬í•­ì€ ëŠì„ì—†ì´ ë³€í™”í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

ì•„ë˜ëŠ” ë‚´ê°€ [syncspot](https://syncspot.kr/) í”„ë¡œì íŠ¸ë¥¼ ê°œë°œí•˜ë©´ì„œ ê¸°íšìë¡œë¶€í„° ë°›ì€ ìš”êµ¬ì‚¬í•­ ì¤‘ ì¼ë¶€ì´ë‹¤.

1. ì¥ì†Œ ì…ë ¥ ê¸°ëŠ¥ì—ì„œ ì…ë ¥ ë¶€ë¶„ ì•„ë˜ ì¶”ì²œ ê²€ìƒ‰ ëª©ë¡ë„ ë³¼ ìˆ˜ ìˆë„ë¡ ë³€ê²½í•´ì£¼ì„¸ìš”.

2. ëª¨ë°”ì¼ì—ì„œëŠ” ì§€ë„ë¥¼ ë” í¬ê²Œ ë³´ì—¬ì£¼ê³ , ì¥ì†Œ ëª©ë¡ì€ ìŠ¤ì™€ì´í”„ë¡œ ë³¼ ìˆ˜ ìˆê²Œ í•´ì£¼ì„¸ìš”.

ì²« ë²ˆì§¸ ìš”êµ¬ì‚¬í•­ì—ì„œ ë§Œì•½ ì¥ì†Œë¥¼ ì…ë ¥í•˜ëŠ” ì½”ë“œê°€ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬ë˜ì–´ ìˆì§€ ì•Šê³  í•˜ë‚˜ì˜ íŒŒì¼ë‚´ì— í•¨ìˆ˜ë¡œ ê´€ë¦¬ë˜ê³  ìˆë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œ? ë˜ëŠ” ì¥ì†Œë¥¼ ì…ë ¥í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì´ë¯¸ ë„ˆë¬´ ë§ì€ ì±…ì„(ì…ë ¥í•œ í‚¤ì›Œë“œì—ëŒ€í•´ ë„ë¡œëª… ì£¼ì†Œë¥¼ ê²€ìƒ‰, ì…ë ¥ UIë¥¼ ë³´ì—¬ì¤Œ, ì¶”ì²œ ê²€ìƒ‰ ëª©ë¡ì„ ë³´ì—¬ì¤Œ ë“±ë“±)ì„ ê°€ì§€ê³  ìˆë‹¤ë©´ ì–´ë–¨ê¹Œ? ì•„ë§ˆ í•´ë‹¹ ì½”ë“œë¥¼ ì°¾ëŠ” ê³¼ì •ë„ í˜ë“¤ê²Œ ë˜ê³  ì´ì— ë”°ë¼ ê°„ë‹¨í•œ ìš”êµ¬ì‚¬í•­ë„ êµ¬í˜„í•˜ê¸° ì–´ë ¤ì›Œ ì§ˆ ê²ƒ ê°™ë‹¤.

ë‘ ë²ˆì§¸ ìš”êµ¬ì‚¬í•­ì—ì„œ ë§Œì•½ ì§€ë„ë¥¼ ë³´ì—¬ì£¼ëŠ” ë¶€ë¶„ê³¼ ì‚¬ìš©ìê°€ ì„ íƒí•œ ì¢Œí‘œì— ëŒ€í•´ ë°›ì•„ì˜¤ê³  ì¶”ê°€í•˜ëŠ” ê³¼ì •ì´ íŒŒì¼ë‚´ì— ìˆë‹¤ë©´, ì¦‰ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ UI ì»´í¬ë„ŒíŠ¸ì™€ ì„ì—¬ ìˆë‹¤ë©´, ì´ëŸ° ì‘ì€ ë³€ê²½ë„ ë³µì¡í•´ ì§ˆ ê²ƒì´ë‹¤.

ì´ë ‡ë“¯ ì‚¬ìš©ìì˜ ìš”êµ¬ì‚¬í•­ì€ ëŠì„ì—†ì´ ë³€ê²½ë˜ê¸° ë•Œë¬¸ì— ì´ëŸ¬í•œ ë³€í™”ì— í° ì• ë¡œì‚¬í•­ì—†ì´ ì˜ ëŒ€ì‘í•˜ê¸° ìœ„í•´ì„  ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ê³„ ê·¼ê°„ì´ ì¢‹ì•„ì•¼ í•œë‹¤ê³  ìƒê°í•œë‹¤.

> ê·¸ë ‡ë‹¤ë©´ ìœ„ì˜ ìš”êµ¬ì‚¬í•­ì„ ì˜ ëŒ€ì‘í•˜ê¸° ìœ„í•´ì„œ ì½”ë“œë¥¼ ì–´ë–»ê²Œ ì½”ë“œë¥¼ ì§œëŠ” ê²ƒì´ ì¢‹ì„ê¹Œ?

ë‚˜ëŠ” ê¸°ì¡´ì˜ ì½”ë“œë³´ë‹¤ ë” í™•ì¥ì„±ì´ ìˆëŠ” ì‹œìŠ¤í…œ êµ¬ì¡°ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ì—ëŠ” í•˜ë‚˜ì˜ ì±…ì„ì„ ë¶€ì—¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì½”ë“œë¥¼ ì§¤ ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤ê³  ìƒê°í–ˆê³  SOLIDì˜ ë‹¨ì¼ ì±…ì„ ì›ì¹™(SRP)ì„ ì ìš©í•˜ì—¬ ê¸°ì¡´ ì½”ë“œì˜ ìœ ì§€ ë³´ìˆ˜ì„±ì„ ë†’ì´ê³ ì í–ˆë‹¤.

ì•„ë˜ëŠ” í˜„ì¬ `ì¥ì†Œ ì…ë ¥ ì»´í¬ë„ŒíŠ¸ (LocationEnterPage)`ì˜ ì½”ë“œì´ë‹¤.

```javascript
interface ILocationForm {
  myLocations: IPlaceSaveRequestType[];
  friendLocations: IPlaceSaveRequestType[];
}

export default function LocationEnterPage() {
  const navigate = useNavigate();
  const queryClient = useQueryClient();
  const { roomId } = useParams();
  const lastLocationRef = useRef<HTMLLIElement>(null);
  const locationListRef = useRef<HTMLUListElement>(null);
  const [savedLocations, setSavedLocations] = useState<ILocation[]>([]);
  const [bottomSheetHeight, setBottomSheetHeight] = useState(500);

  // ì¥ì†Œ ëª©ë¡ ì¡°íšŒ ì¿¼ë¦¬
  const { data: placeSearchData } = useGetPlaceSearchQuery({
    enabled: !!roomId,
  });
  const { data: userInfo } = useGetUserInfoQuery();

  const { mutate: placeSaveMutation } = usePlaceSaveMutation(); // ì¥ì†Œ ì €ì¥
  const { mutate: placeUpdateMutation } = usePlaceUpdateMutation(); // ì¥ì†Œ ìˆ˜ì •
  const { mutate: placeDeleteMutation } = usePlaceDeleteMutation(); // ì¥ì†Œ ì‚­ì œ

  const { control, setValue, watch, reset } = useForm<ILocationForm>({
    defaultValues: {
      myLocations: [],
      friendLocations: [],
    },
  });

  const {
    fields: myLocationFields,
    append: appendMyLocation,
    remove: removeMyLocation,
  } = useFieldArray({
    control,
    name: 'myLocations',
  });

  const { fields: friendLocationFields } = useFieldArray({
    control,
    name: 'friendLocations',
  });

  const myLocations = watch('myLocations');
  const friendLocations = watch('friendLocations');

  const isAllMyLocationsFilled =
    myLocations.length > 0 &&
    myLocations.every((loc) => loc.addressLat !== 0 && loc.addressLong !== 0);

  useEffect(() => {
    if (placeSearchData?.data) {
      // ë‚´ ì¥ì†Œê°€ ì—†ê³ , ì‚¬ìš©ìì˜ ê¸°ë³¸ ì£¼ì†Œê°€ ìˆëŠ” ê²½ìš°ì—ë§Œ ìë™ ì €ì¥
      ...
      } else {
        ...
      }
    }
  }, [placeSearchData?.data, userInfo?.data, reset, placeSaveMutation]);

  useEffect(() => {
    if (
      lastLocationRef.current &&
      myLocationFields.length >
        (placeSearchData?.data?.myLocations?.length || 0)
    ) {
      const isMobile = window.innerWidth < 1024;

      ...
    }
  }, [myLocationFields.length, placeSearchData?.data?.myLocations?.length]);

  const handleLocationSelect = (location: ISelectedLocation, index: number) => {
    ...
  };

  const handleDeleteLocation = (index: number) => {
    ...
  };

  const isValidLocation = (loc: (typeof myLocations)[0]) =>
    loc.addressLat !== 0 && loc.addressLong !== 0;

  const formatLocations = (
    locations: typeof myLocations | undefined,
    isMyLocation: boolean,
  ) =>
    locations?.filter(isValidLocation).map((location) => ({
      lat: location.addressLat,
      lng: location.addressLong,
      isMyLocation,
      roadNameAddress: location.roadNameAddress,
    })) || [];

  const coordinates = [
    ...formatLocations(myLocations, true),
    ...formatLocations(friendLocations, false),
  ];

  const shouldShowMap = coordinates.length > 0;

  const handleAddLocation = () => {
    appendMyLocation({
      siDo: '',
      siGunGu: '',
      roadNameAddress: '',
      addressLat: 0,
      addressLong: 0,
    });
  };

  const getScrollAreaStyle = (bottomSheetHeight: number) => {
    ...
  };

  return (
    <>
      <div className="hidden lg:grid w-full grid-cols-2 px-[7.5rem] gap-[0.9375rem] mt-[1.5625rem]">
        <div className="flex flex-col order-2 p-5 rounded-default bg-gray-light lg:order-1 lg:max-h-[calc(100vh-8rem)]">
          <h1 className="flex items-center justify-center text-subtitle lg:text-title text-tertiary my-[1.25rem] lg:my-[1.5625rem]">
            ëª¨ì„ ì •ë³´ ì…ë ¥
          </h1>
          <h1 className="mb-1 lg:mb-[0.375rem] ml-2 text-menu lg:text-subtitle text-tertiary">
            ë‚´ê°€ ì…ë ¥í•œ ì¥ì†Œ
          </h1>
          <ul
            ref={locationListRef}
            className="flex flex-col p-1 max-h-[calc(100vh-38rem)] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-normal scrollbar-track-transparent scrollbar-thumb-rounded-full"
          >
            {myLocationFields.length === 0 ? (
              <li className="flex items-center justify-center py-4 text-description lg:text-content text-gray-dark">
                ì•„ë˜ ì¥ì†Œ ì¶”ê°€í•˜ê¸° ë²„íŠ¼ì„ í´ë¦­í•´ ì¥ì†Œë¥¼ ì¶”ê°€í•´ë³´ì„¸ìš”!
              </li>
            ) : (
              myLocationFields.map((field, index) => (
                <li
                  key={field.id}
                  ref={
                    index === myLocationFields.length - 1
                      ? lastLocationRef
                      : null
                  }
                  className="flex group/location relative items-center justify-between bg-white-default rounded-default mb-[0.625rem] hover:ring-1 hover:ring-gray-normal z-10"
                >
                  <KakaoLocationPicker
                    InputClassName="w-full text-description lg:text-content bg-white-default py-[1.3125rem] truncate"
                    onSelect={(location) =>
                      handleLocationSelect(location, index)
                    }
                    defaultAddress={field.roadNameAddress}
                    usePortal={true}
                  />
                  <button
                    type="button"
                    onClick={() => handleDeleteLocation(index)}
                    className="p-1 mx-2 rounded-[0.5rem] hover:bg-gray-normal absolute right-0 group/deleteButton hidden group-hover/location:block"
                  >
                    <IconXmark className="transition-none size-4 text-gray-normal group-hover/deleteButton:text-gray-dark" />
                  </button>
                </li>
              ))
            )}
          </ul>
          <div className="flex items-center mb-1 lg:mb-[0.375rem] mt-2 lg:mt-4 ml-2 justify-between">
            <h1 className=" text-menu lg:text-subtitle text-tertiary">
              ì¹œêµ¬ê°€ ì…ë ¥í•œ ì¥ì†Œ
            </h1>
            <ShareButton />
          </div>
          <div className="max-h-[calc(100vh-38rem)] mb-2 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-normal scrollbar-track-transparent scrollbar-thumb-rounded-full">
            {friendLocationFields.length === 0 ? (
              <div className="flex items-center justify-center py-4 text-description lg:text-content text-gray-dark">
                ì•„ì§ ì¹œêµ¬ê°€ ì¥ì†Œë¥¼ ì…ë ¥í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤
              </div>
            ) : (
              friendLocationFields.map((field) => (
                <div
                  key={field.id}
                  className="w-full text-description lg:text-content bg-white-default rounded-default truncate mb-[0.625rem] py-[1.3125rem] pl-[0.9375rem] cursor-not-allowed opacity-70"
                >
                  {field.roadNameAddress || 'ìœ„ì¹˜ ì •ë³´ ì—†ìŒ'}
                </div>
              ))
            )}
          </div>
          <div className="flex flex-col mt-auto gap-[0.5rem]">
            <Button
              buttonType="secondary"
              onClick={handleAddLocation}
              className="px-[0.3125rem] w-full"
            >
              ì¥ì†Œ ì¶”ê°€í•˜ê¸°
            </Button>
            <Button
              buttonType="primary"
              onClick={() => {
                queryClient.invalidateQueries({
                  queryKey: ROOM_QUERY_KEY.GET_CHECK_LOCATION_ENTER(roomId!),
                });
                navigate(PATH.LOCATION_RESULT(roomId!));
              }}
              disabled={!isAllMyLocationsFilled}
              className="px-[0.3125rem] w-full"
            >
              ì¤‘ê°„ ì§€ì  ì°¾ê¸°
            </Button>
          </div>
        </div>
        <div className="rounded-default min-h-[calc(100vh-8rem)] order-1 lg:order-2">
          <KakaoMap coordinates={shouldShowMap ? coordinates : []} />
        </div>
      </div>

      <div className="lg:hidden">
        <div className="fixed inset-0 top-[4.75rem]">
          <KakaoMap coordinates={shouldShowMap ? coordinates : []} />
        </div>

        <BottomSheet
          minHeight={30}
          maxHeight={90}
          initialHeight={50}
          headerHeight={40}
          onHeightChange={(height) => setBottomSheetHeight(height)}
        >
          <div className="flex flex-col h-full">
            <h1 className="flex items-center justify-center my-4 text-subtitle text-tertiary">
              ëª¨ì„ ì •ë³´ ì…ë ¥
            </h1>
            <div className="flex-1 px-4 overflow-y-auto">
              <h1 className="mb-1 ml-2 text-menu text-tertiary">
                ë‚´ê°€ ì…ë ¥í•œ ì¥ì†Œ
              </h1>
              <ul
                className={`flex flex-col p-1 ${getScrollAreaStyle(bottomSheetHeight)} scrollbar-thin scrollbar-thumb-gray-normal scrollbar-track-transparent scrollbar-thumb-rounded-full transition-all duration-300 ease-in-out`}
              >
                {myLocationFields.length === 0 ? (
                  <li className="flex items-center justify-center py-4 text-description text-gray-dark">
                    ì•„ë˜ ì¥ì†Œ ì¶”ê°€í•˜ê¸° ë²„íŠ¼ì„ í´ë¦­í•´ ì¥ì†Œë¥¼ ì¶”ê°€í•´ë³´ì„¸ìš”!
                  </li>
                ) : (
                  myLocationFields.map((field, index) => (
                    <li
                      key={field.id}
                      ref={
                        index === myLocationFields.length - 1
                          ? lastLocationRef
                          : null
                      }
                      className="flex relative items-center justify-between bg-white-default rounded-default mb-[0.625rem] ring-1 ring-gray-normal lg:ring-0 lg:hover:ring-1 lg:hover:ring-gray-normal"
                    >
                      <KakaoLocationPicker
                        InputClassName="w-full text-description bg-white-default py-[1.0625rem] truncate pr-12"
                        onSelect={(location) =>
                          handleLocationSelect(location, index)
                        }
                        defaultAddress={field.roadNameAddress}
                        usePortal={true}
                      />
                      <button
                        type="button"
                        onClick={() => handleDeleteLocation(index)}
                        className="p-1 mx-2 rounded-[0.5rem] hover:bg-gray-normal absolute right-0 lg:hidden lg:group-hover/location:block"
                      >
                        <IconXmark className="transition-none size-4 text-gray-normal group-hover/deleteButton:text-gray-dark" />
                      </button>
                    </li>
                  ))
                )}
              </ul>

              <h1 className="mt-2 mb-1 ml-2 text-menu text-tertiary">
                ì¹œêµ¬ê°€ ì…ë ¥í•œ ì¥ì†Œ
              </h1>
              <div
                className={`mb-2 ${getScrollAreaStyle(bottomSheetHeight)} scrollbar-thin scrollbar-thumb-gray-normal scrollbar-track-transparent scrollbar-thumb-rounded-full transition-all duration-300 ease-in-out`}
              >
                {friendLocationFields.length === 0 ? (
                  <div className="flex items-center justify-center py-4 text-description text-gray-dark">
                    ì•„ì§ ì¹œêµ¬ê°€ ì¥ì†Œë¥¼ ì…ë ¥í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤
                  </div>
                ) : (
                  friendLocationFields.map((field) => (
                    <div
                      key={field.id}
                      className="w-full text-description text-gray-dark truncate mb-[0.625rem] py-[1.0625rem] pl-[0.9375rem] cursor-not-allowed opacity-70 bg-gray-light rounded-default"
                    >
                      {field.roadNameAddress}
                    </div>
                  ))
                )}
              </div>
            </div>

            <div className="flex flex-col gap-[0.5rem] px-4 py-6 bg-white-default">
              <Button
                buttonType="secondary"
                onClick={handleAddLocation}
                className="px-[0.3125rem] w-full"
              >
                ì¥ì†Œ ì¶”ê°€í•˜ê¸°
              </Button>
              <Button
                buttonType="primary"
                onClick={() => {
                  queryClient.invalidateQueries({
                    queryKey: ROOM_QUERY_KEY.GET_CHECK_LOCATION_ENTER(roomId!),
                  });
                  navigate(PATH.LOCATION_RESULT(roomId!));
                }}
                disabled={!isAllMyLocationsFilled}
                className="px-[0.3125rem] w-full"
              >
                ì¤‘ê°„ ì§€ì  ì°¾ê¸°
              </Button>
            </div>
          </div>
        </BottomSheet>
      </div>
    </>
  );
}

```

ìœ„ ì½”ë“œì˜ ê²½ìš° ì•½ 500ì¤„ì´ ë„˜ì–´ê°€ê³  ìˆìœ¼ë©°, ëª¨ë“  ë¡œì§ì´ í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ì— ë‹´ê²¨ìˆì–´ ì»´í¬ë„ŒíŠ¸ê°€ ë„ˆë¬´ ë³µì¡í•´ì§€ê³  ì´ì— ë”°ë¼ ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ì›Œì§„ë‹¤ëŠ” ë¬¸ì œê°€ ìˆë‹¤.

í•´ë‹¹ ì½”ë“œì˜ ë¬¸ì œë¥¼ ì„¸ë¶„í™”í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

- ë°ì´í„° í˜ì¹­
- í¼ ì²˜ë¦¬
- ì´ë²¤íŠ¸ ì²˜ë¦¬
- ì¡°ê±´ë¶€ ë Œë”ë§ìœ¼ë¡œ UIë¥¼ ë¶„ê¸°
- ì¤‘ë³µë˜ëŠ” ì½”ë“œ

ìµœì¢…ì ìœ¼ë¡œ í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ì— ëª¨ë“  ë¡œì§ì´ ë‹´ê²¨ìˆì–´ ì»´í¬ë„ŒíŠ¸ í•˜ë‚˜ì— ë„ˆë¬´ ë§ì€ ì—­í• ì´ ë¶€ì—¬ë˜ì–´ ìˆê³  ì´ì— ë”°ë¼ ìš”êµ¬ ì‚¬í•­ ë³€ê²½ì´ ì–´ë µë‹¤ëŠ” ë¬¸ì œê°€ ìˆë‹¤.

ë”°ë¼ì„œ ë‚˜ëŠ” Context API, ì»¤ìŠ¤í…€ í›…, ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬ ë“±ì„ í†µí•´ í•´ë‹¹ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³ ì í–ˆë‹¤.

### Context Providerë¥¼ ì‚¬ìš©í•˜ë©°, ë””ë°”ì´ìŠ¤ íƒ€ì…ì— ë”°ë¼ ì¥ì†Œ ì…ë ¥ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°ìŠ¤í¬í†±ê³¼ ëª¨ë°”ì¼ë¡œ ë¶„ë¦¬

`LocationEnterPage.tsx`

```javascript
import { useDeviceType } from '@src/hooks/useDeviceType';
import DesktopLocationEnter from '@src/components/location/LocationEnterPage/DesktopLocationEnter';
import MobileLocationEnter from '@src/components/location/LocationEnterPage/MobileLocationEnter';
import { LocationProvider } from '@src/components/location/LocationEnterPage/LocationContext';

export default function LocationEnterPage() {
  const { isMobile } = useDeviceType();

  return (
    <LocationProvider>
      {isMobile ? <MobileLocationEnter /> : <DesktopLocationEnter />}
    </LocationProvider>
  );
}
```

ë¨¼ì € ëª¨ë°”ì¼ê³¼ ë°ìŠ¤í¬í†±ì— ë”°ë¼ MobileLocationEnter, DesktopLocationEnter ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬í•´ì£¼ì—ˆë‹¤. ì´í›„ ê° ì»´í¬ë„ŒíŠ¸ì— í•„ìš”í•œ propsë“¤ì„ ì „ë‹¬í•´ì£¼ë ¤ê³  í•˜ì˜€ë‹¤. í•˜ì§€ë§Œ ì—¬ê¸°ì„œ ì‘ì€ ë¬¸ì œê°€ ìƒê²¼ë‹¤. ë‘ ì»´í¬ë„ŒíŠ¸ì— ê³µí†µì ìœ¼ë¡œ ë„˜ê²¨ì£¼ëŠ” propsê°€ ë§ì•˜ìœ¼ë©° ì‹¬ì§€ì–´ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©ë˜ì§€ ì•Šê³  ìì‹ì—ê²Œ ë„˜ê²¨ì£¼ëŠ” propë„ ì¡´ì¬í•˜ì˜€ë‹¤. ì´ëŠ” ë¶ˆí•„ìš”í•œ props drillingì„ ë°œìƒì‹œí‚¤ëŠ” ê³¼ì •ì´ë¼ê³  ìƒê°í•˜ì˜€ê³  ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ Context APIë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒíƒœì™€ í•¨ìˆ˜ë¥¼ ê³µìœ í•˜ê³ ì í–ˆë‹¤.

ìµœì¢…ì ìœ¼ë¡œ ìœ„ì™€ ê°™ì´ ì¥ì†Œ ì…ë ¥ ì»´í¬ë„ŒíŠ¸ì— `ë””ë°”ì´ìŠ¤ íƒ€ì…ì— ë”°ë¼ ì ì ˆí•œ UI ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§` ì´ë¼ëŠ” í•˜ë‚˜ì˜ ì±…ì„ì„ ë¶€ì—¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë¦¬íŒ©í† ë§ í•˜ì˜€ë‹¤.

### API í˜¸ì¶œ ê´€ë ¨ ë¡œì§ì„ ë³„ë„ì˜ ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ ë¶„ë¦¬

```javascript
import { useParams } from 'react-router-dom';
import { useGetPlaceSearchQuery } from '@src/state/queries/location/useGetPlaceSearchQuery';
import { useGetUserInfoQuery } from '@src/state/queries/users/useGetUserInfoQuery';

export function useLocationData() {
  const { roomId } = useParams();

  const { data: userInfo } = useGetUserInfoQuery();
  const { data: placeSearchData } = useGetPlaceSearchQuery({
    enabled: !!roomId,
  });

  return {
    placeSearchData,
    userInfo,
  };
}
```

ì¥ì†Œ ì…ë ¥ ì»´í¬ë„ŒíŠ¸ì— í•„ìš”í•œ ì´ˆê¸° ë°ì´í„°(ì‚¬ìš©ìì˜ ê¸°ë³¸ ì£¼ì†Œ, ì¹œêµ¬ì˜ ì¥ì†Œ ëª©ë¡, ë‚´ê°€ ì…ë ¥í•œ ì¥ì†Œ ëª©ë¡)ë¥¼ í˜ì¹­í•˜ëŠ” ë¡œì§ì„ ë³„ë„ì˜ ì»¤ìŠ¤í…€ í›…(useLocationData)ìœ¼ë¡œ ë¶„ë¦¬í–ˆë‹¤.

ì´ë¥¼ í†µí•´ ë°ì´í„° í˜ì¹­ ë¡œì§ì„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìœ¼ë©° ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°ì´í„° í˜ì¹­ ê´€ë ¨ ì½”ë“œê°€ ì œê±°ë˜ì–´ ê°€ë…ì„±ì´ í–¥ìƒë˜ì—ˆë‹¤.

### í¼ ìƒíƒœ ê´€ë¦¬ ë¡œì§ì„ ë³„ë„ì˜ ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ ë¶„ë¦¬

```javascript
import { IPlaceSaveRequestType } from '@src/types/location/placeSaveRequestType';
import { useForm, useFieldArray } from 'react-hook-form';

export interface ILocationForm {
  myLocations: IPlaceSaveRequestType[];
  friendLocations: IPlaceSaveRequestType[];
}

export function useLocationForm() {
  const {
    control,
    setValue: setLocationValue,
    watch,
    reset: resetLocation,
  } = useForm <
  ILocationForm >
  {
    defaultValues: {
      myLocations: [],
      friendLocations: [],
    },
  };

  const {
    fields: myLocationFields,
    append: appendMyLocation,
    remove: removeMyLocation,
  } = useFieldArray({
    control,
    name: 'myLocations',
  });

  // ... ê¸°íƒ€ í¼ ê´€ë ¨ ë¡œì§ ...

  return {
    control,
    setLocationValue,
    resetLocation,
    myLocationFields,
    friendLocationFields,
    removeMyLocation,
    appendMyLocation,
    handleAddLocation,
    myLocations,
    friendLocations,
    isAllMyLocationsFilled,
    coordinates,
    shouldShowMap,
  };
}
```

ê¸°ì¡´ ì¥ì†Œ ì…ë ¥ ì»´í¬ë„ŒíŠ¸ì˜ ê²½ìš° React Hook Formì„ ì‚¬ìš©í•˜ì—¬ ë‚´ê°€ ì…ë ¥í•œ ëª©ë¡, ì¹œêµ¬ê°€ ì…ë ¥í•œ ëª©ë¡ì„ ê´€ë¦¬í•˜ì˜€ìœ¼ë©° ë°ì´í„° í˜ì¹­ ì´í›„ í¼ í•„ë“œë¥¼ ì„¤ì •í•´ì£¼ëŠ” ê³¼ì •, ì¥ì†Œ ì…ë ¥ í•„ë“œì˜ ì¶”ê°€/ì œê±° ë“±ì˜ ê³¼ì •ì´ ë‹¤ë¥¸ ì—­í• ë“¤ê³¼ í•¨ê»˜ í•˜ë‚˜ì˜ íŒŒì¼ë‚´ë¶€ì— ìˆì–´ ì´ì— ëŒ€í•œ í™•ì¸ì´ ì–´ë ¤ì› ë‹¤.

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ í¼ ìƒíƒœ ê´€ë¦¬ ë¡œì§ì„ ë³„ë„ì˜ ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ ë¶„ë¦¬í•˜ì—¬ í•´ë‹¹ ë¡œì§ì„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•˜ì˜€ë‹¤

### ìœ„ì¹˜ ê´€ë ¨ API í˜¸ì¶œ ë¡œì§ ë¶„ë¦¬

```javascript
export function useLocationMutations({
myLocations,
friendLocations,
setLocationValue,
removeMyLocation,
}: UseLocationMutationsProps) {
const [savedLocations, setSavedLocations] = useState<ILocation[]>([]);
const { mutate: placeSaveMutation } = usePlaceSaveMutation();
const { mutate: placeUpdateMutation } = usePlaceUpdateMutation();
const { mutate: placeDeleteMutation } = usePlaceDeleteMutation();

const handleLocationSelect = (location: ISelectedLocation, index: number) => {
// ìœ„ì¹˜ ì„ íƒ ì²˜ë¦¬ ë¡œì§
// ì¤‘ë³µ ì²´í¬, ê¸°ì¡´ ìœ„ì¹˜ ì—…ë°ì´íŠ¸ ë˜ëŠ” ìƒˆ ìœ„ì¹˜ ì €ì¥
// ...
};

const handleLocationUpdate = (
placeId: number,
newLocation: INewLocation,
index: number,
) => {
// ìœ„ì¹˜ ì—…ë°ì´íŠ¸ API í˜¸ì¶œ ë° ìƒíƒœ ì—…ë°ì´íŠ¸
// ...
};

const handleDeleteLocation = (index: number) => {
// ìœ„ì¹˜ ì‚­ì œ API í˜¸ì¶œ ë° ìƒíƒœ ì—…ë°ì´íŠ¸
// ...
};

return {
savedLocations,
setSavedLocations,
handleLocationSelect,
handleDeleteLocation,
};
}
```

ì¥ì†Œì— ëŒ€í•œ ì¶”ê°€, ìˆ˜ì •, ì‚­ì œì™€ ê´€ë ¨ëœ API í˜¸ì¶œ ë¡œì§ì„ ë³„ë„ì˜ í›…ìœ¼ë¡œ ë¶„ë¦¬í–ˆë‹¤.

### ì´ˆê¸° ë°ì´í„° ì„¤ì • ë¡œì§ ë¶„ë¦¬

```javascript
export function useLocationInitialization({
  placeSearchData,
  userInfo,
  resetLocation,
  setSavedLocations,
}: UseLocationInitializationProps) {
  const { mutate: placeSaveMutation } = usePlaceSaveMutation();

  useEffect(() => {
    if (placeSearchData?.data) {
      // ì´ˆê¸° ë°ì´í„° ì„¤ì • ë¡œì§
      // ì‚¬ìš©ì ê¸°ë³¸ ì£¼ì†Œê°€ ìˆëŠ” ê²½ìš° ìë™ ì €ì¥
      // ê¸°ì¡´ ìœ„ì¹˜ ë°ì´í„° ë¡œë“œ
      // ...
    }
  }, [
    placeSearchData?.data,
    userInfo?.data,
    resetLocation,
    placeSaveMutation,
    setSavedLocations,
  ]);
}
```

ìœ„ì™€ ê°™ì´ ì»´í¬ë„ŒíŠ¸ ì´ˆê¸°í™” ì‹œ í•„ìš”í•œ ë°ì´í„°ì— ëŒ€í•´ ì´ˆê¸°í™” ë¡œì§ì„ ë¶„ë¦¬í•˜ì˜€ë‹¤.
ì‚¬ìš©ìì˜ ê¸°ë³¸ ì£¼ì†Œê°€ ìˆëŠ” ê²½ìš° ìë™ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ê³¼ì •, ê¸°ì¡´ ìœ„ì¹˜ ë°ì´í„° ë¡œë“œ ë“±ì˜ ê³¼ì •ì„ ë‹´ë‹¹í•˜ë„ë¡ í•˜ì˜€ë‹¤.

### ì»¨í…ìŠ¤íŠ¸ APIë¥¼ í†µí•œ ìƒíƒœ ê³µìœ 

ìœ„ì—ì„œ ë¶„ë¦¬í•œ ëª¨ë“  ë¡œì§ì„ í†µí•©í•˜ê³  í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬í•˜ê¸° ìœ„í•œ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ë§Œë“¤ì—ˆë‹¤.

```javascript
import React, { createContext, useContext, ReactNode, useRef } from 'react';
import { ISelectedLocation } from '@src/components/common/kakao/types';
import { useLocationData } from '@src/hooks/location/useLocationData';
import { useLocationForm } from '@src/hooks/location/useLocationForm';
import { useLocationMutations } from '@src/hooks/location/useLocationMutations';
import { useLocationInitialization } from '@src/hooks/location/useLocationInitialization';
import { useAutoScroll } from '@src/hooks/location/useAutoScroll';

interface ILocationField {
  id: string;
  siDo: string;
  siGunGu: string;
  roadNameAddress: string;
  addressLat: number;
  addressLong: number;
}

interface ICoordinate {
  lat: number;
  lng: number;
  isMyLocation: boolean;
  roadNameAddress: string;
}

interface LocationContextType {
  // ìœ„ì¹˜ ë°ì´í„°
  myLocationFields: ILocationField[];
  friendLocationFields: ILocationField[];
  coordinates: ICoordinate[];
  shouldShowMap: boolean;

  // ì¥ì†Œ ì…ë ¥ í•„ë“œì— ëŒ€í•œ ref
  lastLocationRef: React.RefObject<HTMLLIElement>;
  locationListRef: React.RefObject<HTMLUListElement>;

  // ì¥ì†Œ ìˆ˜ì •,ì €ì¥,ì‚­ì œ,ì¶”ê°€
  handleLocationSelect: (location: ISelectedLocation, index: number) => boolean;
  handleDeleteLocation: (index: number) => void;
  handleAddLocation: () => void;

  // ëª¨ë“  ì¥ì†Œê°€ ì…ë ¥ë˜ì—ˆëŠ”ì§€ ì—¬ë¶€
  isAllMyLocationsFilled: boolean;
}

const LocationContext =
  createContext <
  LocationContextType >
  {
    myLocationFields: [],
    friendLocationFields: [],
    coordinates: [],
    shouldShowMap: false,
    lastLocationRef: { current: null },
    locationListRef: { current: null },
    handleLocationSelect: () => false,
    handleDeleteLocation: () => {},
    handleAddLocation: () => {},
    isAllMyLocationsFilled: false,
  };

export function LocationProvider({ children }: { children: ReactNode }) {
  const lastLocationRef = useRef < HTMLLIElement > null;
  const locationListRef = useRef < HTMLUListElement > null;

  const { placeSearchData, userInfo } = useLocationData();

  const {
    myLocationFields,
    friendLocationFields,
    setLocationValue,
    resetLocation,
    removeMyLocation,
    handleAddLocation,
    myLocations,
    friendLocations,
    isAllMyLocationsFilled,
    coordinates,
    shouldShowMap,
  } = useLocationForm();

  const {
    handleLocationSelect,
    handleDeleteLocation,
    savedLocations,
    setSavedLocations,
  } = useLocationMutations({
    myLocations,
    friendLocations,
    setLocationValue,
    removeMyLocation,
  });

  /_ ì´ˆê¸° ë°ì´í„° ì„¤ì • _/;
  useLocationInitialization({
    placeSearchData,
    userInfo,
    resetLocation,
    setSavedLocations,
  });

  /_ ìŠ¤í¬ë¡¤ ìë™ ì´ë™ _/;
  useAutoScroll({
    lastLocationRef,
    locationListRef,
    currentLocationsCount: myLocationFields.length,
    savedLocationsCount: savedLocations.length,
  });

  const value = {
    myLocationFields,
    friendLocationFields,
    coordinates,
    shouldShowMap,
    lastLocationRef,
    locationListRef,
    handleLocationSelect,
    handleDeleteLocation,
    handleAddLocation,
    isAllMyLocationsFilled,
  };

  return (
    <LocationContext.Provider value={value}>
      {children}
    </LocationContext.Provider>
  );
}

export function useLocationContext() {
  const context = useContext(LocationContext);
  return context;
}
```

ì´ëŸ¬í•œ ë¦¬íŒ©í† ë§ì„ í†µí•´ ë‹¤ìŒê³¼ ê°™ì€ ì´ì ì„ ì–»ì„ ìˆ˜ ìˆì—ˆë‹¤.

ë¨¼ì € ê° íŒŒì¼ì´ í•˜ë‚˜ì˜ ëª…í™•í•œ ì±…ì„ì„ ê°€ì§€ê²Œ ë˜ì–´ ì½”ë“œì˜ ê°€ë…ì„±ì´ í¬ê²Œ í–¥ìƒë˜ì—ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ useLocationData.tsëŠ” ì˜¤ì§ ë°ì´í„° í˜ì¹­ì—ë§Œ ì§‘ì¤‘í•˜ê³  MyLocationList.tsxëŠ” ì˜¤ì§ ë‚´ ìœ„ì¹˜ ëª©ë¡ UI ë Œë”ë§ì—ë§Œ ì§‘ì¤‘í•œë‹¤.

ë‹¤ìŒìœ¼ë¡œ íŠ¹ì • ê¸°ëŠ¥ì„ ìˆ˜ì •í•  ë•Œ ê´€ë ¨ íŒŒì¼ë§Œ ìˆ˜ì •í•˜ë©´ ìš”êµ¬ì‚¬í•­ì— ë”°ë¥¸ ë°˜ì˜ë„ ì‰¬ì›Œì¡Œê³  ì´ì— ë”°ë¼ ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´í•´ì¡Œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ìœ„ì¹˜ ì„ íƒ ë¡œì§ì„ ìˆ˜ì •í•˜ë ¤ë©´ useLocationMutations.tsë§Œ ìˆ˜ì •í•˜ë©´ ëœë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ ê°€ë…ì„±ì´ ì¢‹ì•„ì¡Œë‹¤. í˜‘ì—½ ì‹œì— ë‹¤ë¥¸ ê°œë°œìë“¤ë¡œ í•˜ì—¬ê¸ˆ ì‹œì  ì´ë™ì´ ì¤„ì–´ë“¤ê²Œ ë˜ì–´ ì½”ë“œë¥¼ ë”ìš± ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.

ì´ë²ˆ ë¦¬íŒ©í† ë§ì„ í†µí•´ ë‹¨ì¼ ì±…ì„ ì›ì¹™ê³¼ ê´€ì‹¬ì‚¬ ë¶„ë¦¬ì˜ ì¤‘ìš”ì„±ì„ ì‹¤ê°í•  ìˆ˜ ìˆì—ˆë‹¤. ë¬¸ì œë¥¼ ì •ì˜í•˜ëŠ” ê²ƒë¶€í„° ì‹œì‘í•˜ì—¬ ê±°ëŒ€í•œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì€ ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•˜ê³ , ë¡œì§ì„ ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ ì¶”ì¶œí•˜ëŠ” ê³¼ì •ìœ¼ë¡œ í†µí•´ ì´ì „ë³´ë‹¤ ë” ë‚˜ì€ ì½”ë“œë¥¼ ë§Œë“¤ ìˆ˜ ìˆì—ˆë‹¤.
